language: node_js
node_js:
- '8'
os:
- linux
cache: npm
install:
- npm install
- npm install -g gulp
- npm run bootstrap-deps
- npm run build
jobs:
  include:
  - stage: release-alpha
    if: branch != master
    script: "./bin/release-patch.sh"
  - stage: release-patch
    if: branch = master
    script: "./bin/release.sh"
services:
- mongodb
env:
  global:
  - secure: Ze3Yl7x5H59j1VzhM7ek2KN7A2JFvMPWrTzBXfVKv89tlNaNxI/7/okxpZ/9J3RuAY4WUJPy4d5eWpmRm6DKCvCDkk2DXT03P2fHykFeib9Fm5ycGRRnEDenEM8q5saXsbjTHHUpFprcgwM0VWcMcnE8Rkt3WXng7K6wJL39FTmB/Wo8kb7LiBOjDIRfMc4TNtrGfvHdn0ZWIO5N7/5EesDbTAbS9fkx7h4BAz0F+o8Gf9mtT1EAOw6BRatTxzywk2PXKH+CyKsnl4RxbCApfc18wgbTo0JB/Dblgl51cWnRZ35Pl1JX0YWMjlG30GklRMK/dZ3wG6UsX24s/52aOCvjsUzt1DDYuqvE3Rb8g+qA1MxDZuXl2T7BsQAZ7ng2iAvfyuZJ1HhzBljr/xg2HoyOFfclfMKvU6LPRRQCdxcWTRKjePDV5aw6UVQVCNW/WfRq/gc2qgmirvP0WIGcWk730D19O/Tye7bZ2SuKrTLTfS2KqshUrGuKCntKQx3JgLBpHDrNyA8ovZputkydU6eGEvfGzPnvXNBjoc7MXlD5yHsP7gRkq7DHwoIRzeipzcQJDCWw6ETI0wBWwiVCKm1qsVOPJEMmVzTfiM+atn86dUbSErvnrAD1ihNcO3iYnn0ZJqVWIgOAvYdjxwKt1IHPkkDfXpa1Ply9wXoxFZE=
  - secure: QAKuZxuMXoH+CxotCHZEg7f6LKu6Rwk0j7BzCKhPuP95FlXD64kE87ToXsN7rWzkM1sIpXXfmQzO0y2IE6Y7X3Dk/9/yuFOZCelqsz4MoPUfFqtna69uF3muCxK6rauBm9QR30GYWIOKx4tLLdbcQ05LHQFE+xn3+oAlaVNzh2mucThdimvbqDnIBKnE3t2Zin42PZ115HO6gw+oF9nCxmIgn5eaZHcsR9jxDjE5hx6BQ0li/C8/EO3CnrIX4a/OW35pTcaY3stV3r9Z5h2nny2eBPLRk5loQ2PEctb/Jix5LStGyEdZ4XUQfMNj7N6BSV1dD92DZxSrK8E7oLBn64snfXlYA3tq8gycKP6GWZGH2ZouE1z6KEw++GOhXjyKxa72svMLd57Y20ZSGlj6HnIH6w8N1AkNEZ2fC94jXM2WCOW0Li2JSE/d3raAOe8XIwmvhiIbsGrJGqdcXgHzB6uDhpM58o+mEQ7xlNNYoEPWQRnihLRjCsutDra8zX0850gDt2AYK9t5XU1Xc+1dcAk7+Mtjua3thaV3o6JWkEZg9IhYAhbt0vVckVWeltQBoPkZOPMtrKkWoC+8umC27qzuhpfyXmyxiu1QWH6lrh8znAITcOmq86z+h9GovjAt5MsBDmxQP3lHPAIhJFgrMtnJLkAWhda9FgnSX5pkDoo=
  - secure: aSEmfazxwcPuK13pt4tz+1ZKotq3CG1mhpb52nDDi345G0R42dyzGoEpX8l1UkT2SXlwHlZUL6Is4qYVBwbEW2Ll+wry1DXQBraotT7+J1DJdZeLzFVBU/oq0ce91umpOzWyOJhlEwxD9COvcfxuPnFsrnhtVSPUicuRLz2T7r2m0sjPbTCCrOXjAZP1bk5rX4mgUySRLci3kQCHqi+CD6u0nBMPCtKm5w5vOooWJjp+BfZGGleRxFQk0bNIpQ4OkEZaJD+EZNvpq0UCf838tpx3IGvUdplaSIF746nSr96rDUZo2BMPr4wL0aCc2P/vzxbuemN3WiHfitRDSaz9QAPUVUi8K7VYcSY1AqH2efjqs2H2Gjap4cZaT/Gj5kENV36zFj1zFoqGrJJIWiYMuHX735/nsnCOu716m9jYfUmD8CUb2JoMpAbItBett2yt5NMswWHS+HHyQS8NXPkCHqZcERgJA2JFJVWvm9JiPjh2BcQzK8dGD5EQ8v5s4rJ3y1Wfzh0TjJHOnNhLffC9qSqRE13FcwC/Hq5KlXxVyMpoO5Lm5u2bOiRJSXdonoyY9PkMsUD535nVnkULtU4GOLPTy8wbtFmXK7MawLD1jUgLxPL/30UJGsv7whqX45a6nMeDzyJXJAQ3UQfMOJJjwd914UBwLUg17jLc/bxfwxM=
  - secure: evYIpY7q2PlG/4cfQ5iuTX3FtCpNKqdBF8x5t61TyroQEJ15vLMjcc83gXAcNgUp7+HdODHSK95Bo6X7rjTRuJhZ8YHeTewGUInziApkDM4HaH0SZ8gqqlupS3vCEhhVOwIHWEgs5PDduB4hJfQiWRtFiTM1owFnSYocrsAaWFTzf3Boru7xaoPbgJMGEuEGLomfzXysYbAHp/x2hEuEqFLamTXara5y9xp4RNbD5sLkaqGDPQrcNb9dY7TiqrLejz7puHpijWS4kUpeRyEaoPI5wFHIXO2QeGeQsQwnYskbYwbyzTbkUbay+p/6lHaBj6x0dfiMDSQQaJhESUAuGbuJUNJB3mjS+YRNeOC4HjIjiB2n4Fq4Ng/nYOm/izAlE5cNji95TkVNcoo+2/tUIS5oehiWjkOlyFKxBgPrfrmfyKxcOAYSbKwgntrZMmQEYGgmf+xqqaHBIMISgK9WInHPfg68bIgfqAUGSDSOAtGyZRmhK6YZHecSMBDkHwA56dr1FTumPp8ZCN/8UQAEH+xQDEDiTukxtTsecziyPmG8u4YadY5RhDbxCbjrb0LBiKe0IbTRHln8WybVTy1poci6WccJmeFWkEy1J6QdAjCDtIIV674zgJJRx4O+Skr/vAR1qP6fmYaX32Q+Z1w/rOQq1X4K8FyYZtfU2CUEODs=
