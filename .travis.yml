language: node_js
node_js:
- '8'
os:
- linux
cache: npm
install:
- npm install
- npm install -g gulp
- npm run bootstrap-deps
- npm run build
jobs:
  include:
  - stage: release-alpha
    if: branch != master
    script: "./bin/release-patch.sh"
  - stage: release-patch
    if: branch = master
    script: "./bin/release.sh"
services:
- mongodb
env:
  global:
  - secure: yBq6sbaMNRMiB3N6QzjinGWPdPicgU3EZJHTcIXLNwB4OMzzeHLIhLZnwH16FfYU04/dNyRU03Vaoc7JKl5NAUUa3bwS7tSioIZluwJldxr3sxMKpVBlcUCZExSv4zHH5EVPN7fUWEHdIsZak1YHZGEHd0uFiYONgk9L72gW6uLho5raoWLPGLw66AFs4Oa0g4rVDhI4I7bddoWaUosyPC25FjIDVKRicTVYKSS22OlNj7r1FWg7myvYOvLOZKWGKiP5VPKoAbhRq/ival3y9vm5RAUA9hk3woMemJcRR8Z3zDHnGk5dY3grtvrtd/q0R1QsQO9US9e5wBAJHxKR1AR+eWuUxQo5zjHBWood+2e8okZHu7FIsoG7VR4n9Nl7CCwqxNB8UyYTu8qdF7FQRhEjQ7b+1whEHqzvC5EBO1zoiRWAfcl2H2GNXwOvKYjxpNGqOE8imMd8WfmXjCegpfW1aplRqBtJDUqCE5+CWGU5b7gKY0dn3g0pTvfd6TcxJ7utqdC+2BZbLDSR18x/BV37B6puWbQltwNKq/66BPNfYDd1UixUG15YB7uFXOmC+lMQ8hQhbbxVxXsXlARjrRDGD6QrMArlS8mdeiYMGLQxThwEkPk4QCi4Q9ps8Y6/ypqw4H/BMcSRq2hAWXXSUtNZDbPjh9vJ4eyWZ9Vjhj0=
  - secure: XLLaowvX9lp5y70WWZNEGEFwzl+UaFULX7SwT7jlmdvjuukTdIN6vhiBGV5X6kII6HSBxXx7GFL67xLotxQLVy7kdztCKeDKDTDhOtsJmZ1GQNjqnIMhVKMZldZ9Sy+Jgt9N12n0COKQ65MHwdomu7daQcLFYUCFDXgy+p0VfjhvN9N6BvFbyqbjNQUJaz0nvwVBdUKPTEmbx7EX2/cTEFzeqvMHf3X6hZCV3PTQG7SG1hmYpwtmo4vV/yV7hke70PbGPj8p+a/Iza8irI2f48QdaygrSd/zEpmMBqqj1wc+GcH2p4egp/CKeoIoM2919+nB6hsiUKVXexTtCbbBsAzAjD9Z2hDVf3KSt2iKZoJL7IOl0fb/5RcHtRBokx0r600YKQnbH5P7swDwMOBY/M3OqT9HKsfP8BYBHhzAPZF2BL8BN6d1J0xwR4k7E/SOSz0MT2cV4N8FGEemZuF6euNICSskVpWzoilscOYDtSeFxbOI/YRXUzD8ujMrObDchuhcTkm35/PTVvxnoqSYwLA0LY3esvWqfJvrLqqgdkaDy7wO/Yq4bXZtm1lYaQXwrMv7t1mjyHvcedxD7LkJYqMUsIR9o0EyEZo9hlJ5v4tOc0jiOCzjLl/8ZxlN0hDFyfEGlGhDab1SLdlpsoRlnAb6FhkR086teoZGL2JDElE=
  - secure: MdRg7ibQO67ts6T2uDwLIqACbLTESLyzLP5gW5r8aZYCni8txGMCIzh5eEI4s3mDRVv0REuL/o8dd8mH922jGZZoz23Rv+yrJ+hs5nv8MZB3poVTMEPob5m2is9k85xk4inchJ1wmUMW3OvA/1iIk2+5pdUSKom3XmGB/iDxCUSCW85fuE50EaNvFn/0xA44ugNXw/AfLcC9uoYixVQhssu9Z1maITCTcKuxJSWychnxR2hn5K6hPwvHjdywv+xmLEFjWZASMj/884iEvTIqtWcJc1cg4k6K6UtXEtoqBeEGKKSsF0LskOpo1lOPKUS3KRh9I4C67TdbjyldsFvIRUWZt/vyFoz4H3vFkBNXIJSSZISnFhoXdj8eovQZfqB78Ib47R3WLAmC+5FG4DLcaWkRxxQ9uJa5gxI7C/mhh45cA9erV8NyLvcZRr1bE90Jc7/nhh8fW01tF4FBokP8u8TS1ml7YIl5+9CieVQt5UjGyDFf4IjGsWb50uyWT72JgJXBPa1WCIF6xIgw03Ly3Lm9LYGEF2H3OiJUnMT03LUvDbDGnywq24RQEmcoFCuV1aR/6xOaiK21dvNnWXeyv0HF3w/lt1lCcDaA9IlPuXcX5TVJA/T3DHMfX6KZRiyybLGfGyNvCLk5gS0TDHfY52h+ShoHD9yS+9O86aMsV98=
  - secure: WEvv9JDmYR5s4QkJbDQK5n2CkC1NbLOpXP8fZIWHxVwYuPM6yU07vkEyD3De4xUHsol8FF3d51CKXGlelo/DdziplZ3Jj4JJBg3RdIcmxiW4UxuXlqSSa27wxjcsBx0/l7T3qgRF3FAom2vS/wlNUn/CuUGZL/opn8f6mFOam4rCrmTS+13MfLjkJKcmL6Yb+jsdFAl4SJreSGn/810NlQntlQnLYzTIMevK84FXprtRe4oaEnT/KZIAUlJJhlwjric+OpRg9l7HX8BWMhW9or9SpFT8P/1u2UHdn8d2d8R1nl3CHsY3p/TOeiZNoD+MJmuTG79m3g/n44p2qBnww3jn5ZKy28C6bb6M8D/tfFWSTcArUOPK3ty5k5TG0ylvOQcRso1n9E3pWSpOZoG+2jXgfueZkyVvjAyZwBKLvaqMBwgNn9mQr8O0an5MKEymUGklIe4d2WLN/yk2m0pJ6ycwro+9VBG0EIPVxkGZ1fhRdDx6yoFVnTnQfPzlnfZXtP8hX03xsthHywpyqcr4s11VK09oLTpiRTDazPEwf/xsKHdoaJkVUjfgTl16UoGJ6ApWMlD5azmRy4g83kx3dHA/klchFTWYXEUR8NkOyWdNb2yYp7Gdo5WC/oxFGRpm/A8Jof9Rhnmggz+Yv3o+8v7hJ7QfA9pLIyk8cBz/EEs=
