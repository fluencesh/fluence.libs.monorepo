language: node_js
node_js:
- '8'
os:
- linux
cache: npm
install:
- npm install
- npm install -g gulp
- npm run bootstrap-deps
- npm run build
jobs:
  include:
  - stage: release-alpha
    if: branch != master
    script: "./bin/release-patch.sh"
  - stage: release-patch
    if: branch = master
    script: "./bin/release.sh"
services:
- mongodb
env:
  global:
  - secure: PmoRhUz/cDnjH/Ayo5hsP5NGniK47UHwpcCfyH//qYy3Dpr51P4Muc/hqnFbefW4+uyV1wzCi1pdtRMqa5gZCtjZr+RoKM42Q/6zHjM0qjuKifpKPvIVTRQKKWP0NBsxBmYeaWBkME9otgRdEzbQXZyStPoOOcoGc85qW/wbTFa+AIV9gboYNjCygDn0aBg8zoZtPVK7tJZDSE11CLFKXGZ38vG3vk33AjecCtpsmS4joR+0itlNkSXErz+VXjSGq/F2jlx5AmOuPUDNr9dD1LGNn+90348KhcDDOS4iJeFAdnhZ0DW9LMVfdcYWDZm0MhImaTm8oCY0hj/lOS1YPqBssOwq69QnxfHXhLglGW7q3wtOpgzTJXdjYZtMMkCbRPnfikJ8tp4q61DNGq/z7taOFBXTA7Mz8eRoUNvFyzZnqM+gcMz/VwfN2nlZM76bJZJimuDV/pfFSQfrxnpTa2YgP6cb6dJg7zmN2l+YQhD8snevBTrhtCGPoHasEBrJ07k7Erg9WPwNfCTfy0BsKSinywQorF+rgHOSOsaCt2TVZvRlupn/Ke1IlR69Z5usHrQNTWGZjXjeP2tzmZg8aWVRd8aV2sBWybDhd9fkyoUh1EIxWqtsP8uScYrOO7dIFQMcIZrgc+AKIKbDSynkc7Dq2GdXvxWpkXVJWhZo7y4=
  - secure: Ewj0uJRv+qNBvyh/o3fJqBku3rkf/IQ92rLxEZRz0Z7Oas2V+tfHFnvxuFLD1cWwZy/NdUz7zD3XOiVI7BF7Axwh14Oo6XjYUol9QftNdX9aZZjodIa7AqMfhvFcY3c36+0rkmGkUZG9KCJ5A3Owt463O4jf2v/SpwMUoXb5HZpV2DI6kG75oiwp1OwfDqXRhViNWSkdX2S44FQ12YvZErJEjmmH1tq81FI1KjnWSZXYpE4y/zkD95pEYZ+9dt2r4vIAdgGL5WzXI06ASMQ410It014eJAKwZvY8tM0hdLFBPwOUgIqu7b+qlm7OgvteCAZZg2h0LLKSyjNiTtNSEhQ7nw9m0sGBmOAdcA8jl1+A6MoID2BwEumjLaFt1XR3Ff1WX/LHmm7P5uD7FbtU+MirUDQ0JTasuQjSQHgoJfzsn+/tJWGT4rF2itQ0yMs0mtm36fvrFLFwEa94qgzDWn9wdntypLRjcwMB8poHxgFZukaHDqbmQ85AxEEZaaC+c/X3Bo8rsIfFsdWuTy0ilShbXb/SPdBq8BQOnQsrDVpDO5KwRqw+pKxGTMKKNmabZOEbBhnEUMG4kabLkkvo74VK4IhC4mwMgQw97vgJH5AtctMwFHp228lsvZfc7L2sl5I/jWsL4DSNIqHl6zQ84qSQ+YK+7+AYxe59DbA5Y18=
  - secure: EJ9+Q20xZLMaQs2OOW9KxBUH4w0ve5/wfvyduygZ3Pf33kEl1EX7QgARhbzEtY34QgWwmnJkpCZy5ng0VNwdDufEz6Zo39q32Tob4WuktkoKIwvEs23t1CpnpJbrSC/G5ZjZxk7hZsSfv35pzt/pdP4p+NEKoXHEkpPcp54v0QyhRH4PUYKeadqbaaMS+b0beK6xIACFAL8vlDWgODM19xemE4b9+M6YHyMViygi/wcSl6jc/W3W+TDXJdGFTxAavhph1cPLxZpHeMqyF4XeU4j9MOxSF1FDfbthk7x5AM+e4PE37+wf8eoObXE/K5s4v6dPNnLKGTlkYm5aDifKwA6wbb4oN1v0aLY2ybRYxLSxSojjfsI68bQeQ/GQx3Y/gHeymM/+HFjlM2tV+kOsHnR9Hm5HTnbluh3Z9kdPwfk4Sk/4awbWwKhvCll8yWpYA9BPsNxm+bU7oee2bed6vasH7Geh6ndsnzrUo66tNi2Ru3WDGJAzuahrw3bFyFPvFWTb2yk96/DiB8eZ5rMUnoCkRH1ZCt6DWec8DTheLRaCNAN4qeuPtHkflB1Ekj9uQt14zv+WCfFbFxS7T3I/yCqeso/gTz4DKiGekDwA8Wtl4DzNItjDhnaxGT68iCNqo8MP2M582/xYdhMmp1LJg1kzdQetZrWQ6mIj0cm78sI=
