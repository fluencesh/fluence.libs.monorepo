language: node_js
node_js:
- '8'

#- '10'
#- '11'

os:
  - linux

#  - windows

cache: 'npm'

install:
- npm install
- npm install -g gulp
- npm run bootstrap-deps
- npm run build

#- git config --global user.email "bitbucket-bot@applicature.com"
#- git config --global user.name "Bitbucket Bot"

jobs:
  include:
  - stage: release-alpha
    if: branch != master
    script: ./bin/release-patch.sh
  - stage: release-patch
    if: branch = master
    script: ./bin/release.sh

services:
- mongodb