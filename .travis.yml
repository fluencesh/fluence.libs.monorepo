language: node_js
node_js:
- '8'
os:
- linux
cache: npm
install:
- npm install
- npm install -g gulp
- npm run bootstrap-deps
- npm run build
jobs:
  include:
  - stage: release-alpha
    if: branch != master
    script: "./bin/release-patch.sh"
  - stage: release-patch
    if: branch = master
    script: "./bin/release.sh"
services:
- mongodb
env:
  global:
  - secure: wQ1p3fJ0fax8SVTqvdpjOY8/E+JGh4TWecBLFKB8bvA9x0XrsrbLDcXbTfgn5hWeVNYGM5kF8d1NRCIcAg2jsKUXlKPVewUyV1wGUncosBhQ0miqYDHcs6ARROys1lC3ncUQKlJg64AExq0Lcu2txCFNqAz7WbXjI1fUFOHmSwSyPJCcshoKlUw57UHVvpwglnP6cNphTnOG5ACVhB8areRWHZPBHiVg4PWtDFcZ+8hu6DoBNzycNo32PjNJbZcReN8Pkk/Ssrd38Hc0WlQhouC2mQQH3hvU5tgHfvrr9IjebXVdwc9gLKnzybOX4PFhSQQtvQOgDeWFwnBEmrkCY1XAMKZe/X2MlCLcYB/9sjpfbBg18+RsyLQmgLqICVyCKuvI4LWPPO8Ci0BO2Du7cXUy97H2cqFg8kfkRn608O6dbook96KlMCS2XjVmZe6zu44twcunR4ctsZ8fmnvqRL9WbvDDGno9eps3G7TGmDn6hhWo8lxWQ0RVgYzx3bin0Q70594D2NPVVNl0dfZkiI25wNz3dCXHCi9ZRIRhpsbAOXRUZ8ESTW7fmcoDohSoSKNaGzO3aZhL82odxe5B1bo+YslnjazDgVAzFvt9rHc8Pe4B7gK021GxydYY35g4fXhOO9K1dfYHY/EdThoGss0Kb8nX0OhI/gp4WY7hMUM=
  - secure: RQqi7iZQ7mK4YJMpxVM49oYDV0gURmc3tL4yCeK8I2llW0BDfknuDL9j5YiVFRunT3j7R5G3P3XIdXzROx/zGjQeLCMMkbxy7VtHwUkI4XTm8tTTdZDhc4fyVU+7uEpQU4g1Ky5Nd6L1+smn84cqEJQRStSHsGxVQMU+WBeM5b/7rEAOFKS51WBgDIRe3XAEqRh/hcV8VuEA0ylkxTRApGgVBrfhozqQV1XMKmogE0885uGNtkcWCh+fnVJAJbSuXwwM8iB2vaq+GEUiWDXJ4NZ+tQUWyrloEJdkhxs0DUt0SVcbrWPz2AzlKLrKTB7zaOeP/w4+XNh/mYPGZvhdNorQnZaVEUg3sMBTwt5nQWVG6MScJUmhXJTeT7yQYyl+gbpP52bLQ6c6WeizgYswr+uIDcgAB4U8B2hDoePtxT0nV1GXzJM5ukQeOOiG7bhHwfUeOiNmdmFifvBX+NJYsmcUI8/4JtEgc+3GaSUxyp8/ZgtSnS5/nXDW/+ex/yxY+58x26DeNsfLNeJNN4RKZStaf6GwYJ6OMcNfZrVjH/eQzL7Ex0CDGoasRPpiAUNakv5chOsyKB/2YW567rMGbNu2BKqjJ/6Ut821iVWxiYXNcNZhRTiqRMFIKVQ8xz+JNhkyLAyZnSnWMf8PIL7/c3Ttlxu4NGWUEtv9AMPNa+M=
  - secure: p1Jlsk0rg3WWonPs72wWqC88owj77lDJ3z94X9gPl5dpeljKaTgmWuemf5Neel/Eiiv7a1ECmPMNJRYfXGpWip/fT02585J7EylVPlzR8X2HRw2cYALcCYyFHHH46ITy+Qq2VFodBcfG14vfKenKiQW2R1tmXx4QMNZvMKkFmFXR7AazXeCJrcSXKOHi4S9p1x1rongwaYVE06LOAU1aR7PbjcxXS4RPJcZ/gDAvCjwe+ly/U5D/PPhj/jOBv+JrqxJXYjRy5I0AzdcNXLyKda/zv1lMDb+uarZKsnBXbqIjFOynIwFQfVvP13Y7j6iSCBUHNxC6cfNtqw+CwRlUrHoQrWXCRiOnjMl6UBgJ1EV2NN3NzNSf/rGTvcjR0xDIA/0Dmj46Zj36+TpdeiGGuS7eFxb/fl7xi7kxx8KAX08R4ZoGO70KUh8P0jxxnh3MZ1fJXvtUj2Bl7zV8YBK0lXmbjnM79hrgG0f/C8wg4mC7pZxMnu/Oxv17DNxTGwqTyZc3crgdTfWUeh0pf8TMmtqWwhp4ywmpvM1O2+CNWhlFbLvFdmWSVvJ3xCyXdChPk8qGibPjA26nPPhd2Myc7OOjy3Mqn/Pbalnk9a3R1F4tG+9b6hs4cARQwYkQItcimh/N/e6g6BSwUl3niHsNj/Tlw5bLaYP/hPp698pP024=
  - secure: BTfb29c/Rj/hqevxB/eeFtSjnuGP4NYkdCrl31a/Uwp3It3FqeRei2PQpqZk9Hh/bfw5GUJQDdO9w4OjNEOfmIxmjw8rCrkUiE3rdSJTVoVaB6/4AdI3gYXkGGWIGFO9LYZZSm5We1y61XEkhapD45t7Zh7/GQ2/cXwCsXeulEf/1f22pSQx+sF/q/aTNJrTyJtrkWFN9eNvEiYE6dri7psHo4S6Oosu5sq3ipzSGnbgyy1jwhg+GsbOtj3jdYkmu+kK/bidusORKeAWFLp6QHUqndobLlE4ouWnd+uqzTZ5gQ1Lv9dx7Il8AlL6mehwSqcQuYVmPI69sT8XPHq0c86GiKdpz6lhpBuXmHl+hnDh87qZdzKqvS4BjIY4lHq5zxLCAe2SJ4fhzgMOFtaVj78GoH1+iMpfCawXunrJLAKqX/1yztvvJT8IoT0f6/n1iprKzHU8cbmCReMDjhgDH3p38v7lPgzJ9Pp3AuL9wtK3VlBrE40DEqS4vyE3sWu9M09/D3emPWyOKkvM05lezJbTKqz8uAIYSc3sCz3yTyHjAI2TyAr5V57uoc7nFVyhKZbeUwPv3nfku09Z5td1O1rv9i366EFrRb4hd6Mn3Q8xFd/t90s9Y7782s465leiTgccr0Cz8HfAnkLwfE37Pu0EOHBZ2F1DffTPRp0GCkk=
  - secure: OAfT+S0JiTvM1GU+cHInePrgu0pSMwxWRhY7Djq2b303fzxpz1jvWA8Q93UcLETyPendqVpp4f6de7NOHRoQUFeBqIKp8wLvcJ7fopbppKPZTbwbZ4u9oO7yOJaWq5FG8a6LQpc8R9gINLVQBl74zJrFTcRdzJD9+ci+sRuzWOmuSKu8CdUtUcOm+eC+yooUeqU/NCgWRu0euMiE+blBJDq4+9gYiKyfpQLPnPd1oN5StzOoyYedQfOuVEXaLKAUOmetXRX+LSJHVyZekYsMmsSG2R0gDPizu6rTiTCz9mvDZqFcsnnieNOjn3s1xrWjTzWolhv4LhsAA1Uglg7/jrCC3BSd49Tcy8oBZNqdNBYtBdY6D8xvaXl1WbEMm8dA6jF+s05NpVGhdcJ0YxUkuVv1cX1D2dhSs/4x7EjItnecipkB7Vg1F7ZVcLWb6dGCn/4c4H1fFHJXBSJj2rPB68tJ2UNyDAXMl6qgAi9y3J2fPqOXw7gGxyjA+k9E1xrU5Pkqg8IL0K7DBV7v2uWBY1XppFPz08ygTAHSV7WKnZO7CzMSGbbEn4Hr0mRnbPcKKEp2IeQnr0XN3oswBiWeGQ42Sr1L3zWk131urdYrsz3ngWsSNZe+ONh1MIJSTd6afx3F6nbCDJDl3P/XMSUe1FlbKpdRSOGx6cJOa8TNxzo=
  - secure: lpAEeX86ckp8svXu+rVv4tlilqzBYC6sSiEgavLQ79f8aUgcI4CmTmgD3+YalefZpOytkGStYaUvXltNesFpMS4vXWMkl5RB/n0u4Hbgd51Cg1DPGKl9ab1X4EATcDpWJKFmCx1MBNBoGrKj2bzMzSY6qN+BTCvkSQo4zv5WSQ00+hWZsGXJXN0qx5OFsgsIJcvCJpMP9VhMEPBHM92Z+5rzkqQdkz5sZLnBIpnNtjCYi68sACCRRmv4UzX5DmYCXagGIOkb3oKLM6xYEq0wFE3LUO0cvurCVL2vl/NoJmMfNr4rNLXUJC3dRFwDP01SVa9x2oDGRqubNw8qtEQhMoJ1rWcj7DoLOLf9l5QVzS7sLmnb5uAexIXna3z/cguZeawIsH29nzFuHTY1dbByx4JIO7XAKdG2Zvobm1KoeLa63TAqNAoPUnpCbA0b1V0RcDsy0NW5nlKeaKS4VyiB5m7+V4D2rJoJJcsjulrDjXJQ+OtUDyvSNpmbPH58tWYI7J2ET5Z/H5oT8BU9Cn6POqkV0iaNi/OyiT3b0GIQZQSV+YHSy1gOxE56rBxcugmBoCsxm5p9g8NVi9GH6bLjL5hH76Bupz2o/+ojCYknrQa6k/XP3VGhI7DDHlPNtd3tpWET1VC+oaCEtJQIWAkWSPEns/sCC3M/BPH5l728rh0=
  - secure: H2Z9BJIFw/cyx+8EEw2JXHTt0VcefqZJ7QhOqgU7svPnloj9EC8B9QOZkBb9AkpOo35j5yK1JsInw4AvVSG6Z4MgI00aevVEH0fE4tDxmNIHvUnpR7hUqtsf5NLhm7fbSMsSAbdFBruFnwHjRlK7zunS6fq8hLA4uxH1dhTfn8wapTxU0UsPQ1D/LA7v8XlSfHWTCNlh+aTyccZOYyLdATx2a4P41/kEXLIh2HUIYwE0F2SDVp4WewjrwjrXtoqW3BwsPXO8hTx6q43PRr4G6lrvMWjkqwlVbT8qghqoZ106Ot7ea8eO4OYaPyi5j1KVicvOLld9qLuhp9xZO+vnr6uUkreUlhZgv3XD3zXWRyGHSB0QZKL/uzdR/QFQhDtC470OYVwvz5DySs+fAj86yjLy2AaKFc2WeogGmqdDMiDJYOsKMhtv2T8bVib64Id+3INUWxbW4JrVAhImOYKXXYY0YmhoUQEHI7+8H/jwnh66+Z+8kea6YH4TZj/A95Vd+NAcEGOCV0SF/ByhFwR41Me08zJdf+FoErRkG7d16BIV106Vi0OXyugJMf0XpY91w/nbnELi1wFBEZTNeuDFi0SylqSk9VlITIxS6AsaNxiHIzobVD7qCzNsqbhoaep/UC9YNibYhzvJ4PPPs6l9IYbV+1SJQ+SXfH9Yo1LprE8=
