language: node_js
node_js:
- '8'
os:
- linux
cache: npm
install:
- npm install
- npm install -g gulp
- npm run bootstrap-deps
- npm run build
jobs:
  include:
  - stage: release-alpha
    if: branch != master
    script: "./bin/release-patch.sh"
  - stage: release-patch
    if: branch = master
    script: "./bin/release.sh"
services:
- mongodb
env:
  global:
  - secure: PkEy7V49Iuql8m0Hn0TIYsECrgqiPMC21AboIr70yZCC9p2pOx88cCEJkyP9XfJnQdUsy3Hh5CcpBmHfukIuf2HEu55kmYMKZ6TsmAEsY/aNRMgG0L+TOW5+dr4UUH0FnFsj0ew6lUCEyKLTAwjaPvpoX+9QYmt2qVFO0MtSaxHcXoeWLJm1+H9wjQnSly2aN9S7zp0+ugLVoSTU1PZrWF2wO93l0hCefWTQHdZhudt3sWFSFK2LMcVKQj3mB03P0BWy1wZSjgvHmYnYmTY8/IpDRGmurc0KXgx5UrKyJ5I7f96Zcz3R0n3UdsUqR/PAFYp7bMKpbQ+EfiwTTXNhn1MaHLkQ686+5OGiYK/x1RqUCQp2F0+bW0inCyuvcz4pggI8tDgetdysLZnaqAphEMj7yS2GNKtJuJ4vRdT1rmcAHvGd1B6/xvH9eyslZURGFxhNQSYhswHzU6bjFAEC+nY2Z+1VQC3z32IbaeNVjWINZ2pn7B+xdGipNFV16okhgJFc0vHsz+IaWKxyWMe6PGW+uPkYw3sawZG4cgUKpQZ7PImV+jbNfonEe0FTEbq5lAdehycAhAel5V2j1NW83rpCAAtu9ikZxNQUkj5Pp3WxUXwiIE9FwX1fqNy/6p11qlaAsQl02Kr4PoXo6oYioEAyuoVaiDEtJ2zSwENZrNI=
  - secure: DwK1+t8bwbCFWNiUIKQ60i7YVP6/PReJ5pEIYvko3g09HdNJ/KEAjKlp/E4zUp799uylmbFhQqV95NO7SkgBYsgiGK1twAq/c06zsCtPEx64LFzP1eLsUEPOrvoSacvNVaoXgf+cOE8hbWdrcX3/JULAqQOHTHPmhOjPvQdbtFechtZ/ac589VGVP8AvSH7vrkk+t/A8r6hmTNhNgYyoQIbQkV9TyTZLo6wj0ZtsVy8dwAkP6i2KEfbzNVlSKQDYMmUsX2kc/cBBUq8sxCsTuKBWmb4ZJT1NgY2ytNFnQLYYa9Ka01PFmAsJ5xz5EraVEMQt8fzqzJFSkhRYLrG4SInhDdYcr4EmUQhI+9b6ynk+d/KIOT/S+y8+X0v2ELwJRlPawbbTWr0h6T5RI/edEMHcXtJOP8Ih+CJmMDgUfwgJLGy6DHPI49GAYbWoDx6C1jgLULcAmt+zSB9XqJhe34Ws8xskJqAEUHmc8NTj850L2wQh3OT1JFax498CKIB5O3nklu/sMLJA7yr5yptOb8UaM7tCPg58IHxg6aF9P6rdE7rWGjZuWNFyl9s8Dp3LLwM1T7NmRaLBf3iegSuFTM/esdI9DSTPo5RMwJfWL4uaKTkvANJBBgrB6fDu3y3TdIU04xE/8ERxw2DapFuLR6+euyU+j2GLsEiJGnE/jXM=
  - secure: wApwDe3w6E0dQ4kC50mZSFVccaVjX+RBS5PLcTnbp0UieMarC7wkx54C3qrqQODo1mQQAq57Ja48OAC0F1wSjaXP63imK6d5yip0DRrEw+4cUNDIMaRYX8wpDvWjWAPeRy73Vh+CruoxCY7PNTG4+UFthXCR56xOt0Sxk6moMwjOiLCcSdmTAidP0tpfScNNA3MNw+aURpkOYRzYO1PrTyxOzoK7k0yMVGucxPmzB9gFPFYUL0OwB3hzEhMkf7c4oOiXpdnAVRmTsPdOYIkFe0YzTgdRGVpWDKJNDPCVWaqYHDF5gicDJCA9J/8ifsrMeok+ddRd5WavirQWVUD3bU5InzG3wsVAeZbAuTIrzKIu5pS99xLm98bBNBs3GKAWlHRvqh6ndDMe7vMLiM24zg8Y9Qp6mN86G83bKWndLTXlcwgawxwLfEN3At2/xLJsxcA10EqsdfH+Cnr4QCvs19+UEKDOpUGMDVgPsQfnlduP+kk31PYdyX/aEyUssRdIrSCEI0mQbHIJhhMrWBiJh65UG4SriwCuX9e2ycH2Hj4JpD25riPQoy8AlecS0Jua1YHJd/uNPSvFs6Gj/yMlmyXfQhsi+Z6MipWaHgutkn8zGdKkxvpPWAbu+/AC8PZ0RBRsp8YCrvrySJbKXsN+bhru1Ktm3YuV9MDWZrO9Jxo=
  - secure: Sl4o/QqkhhlliZ3u8un/VxvAVmYpqmgxLkL0nH4MXuHYWMKEFIpQvxWaxrwCmzVL0uOHgpD+V5OLHFZgxI+sCoMRzKNArrZoGd1zhTi+M2Lo5eKNDDOhhdvxl9TufR3JlR5dkoOv83fX/jZMGV8D8YY+Rb3cEgSzVqZ/+Y9ZbPYukBpGcgDGIx/+XQiXdjMwMnmg155BmU+SeC5yiLTRgUWLVjNBKjDFv45ln+vvD0605GNQBQfvOcbKEFpR9biI5yF0teGwcKP9pwEPObartzyPZCHU3FZsyWxYHccA6RKUj5GBI2h/j5JQyIdguqR1zJL3gr0KwgUwpDrsEgWpsLD04UThGXE8bujiAfVz2WEvAKK52GTGSm2Ynd02yIm2iWSwx3F6cdiiEIEXXcdAeaH0JSwb7K9so6MYZhMz0ay7aCeJkw08SalJIEw1+YnKvqYTejn1uLV9rPKDa2CNWMOiVGdYxVfYfp371OFrmTO2ytGI3KwBIQNLLa7z4BwN9UpdizaqnrjekE4LTYifVrn8ObFEIilReuVYPHKjX/4LgwOWixDqkf2f2w2TAOjL72Ol1m+PmcAOYGdeWl4zA0LFrUBcakIuAhrixBPr8HxBxIb76ronnrHxGg7ExjgptMv25SHU245oF1VrQEbH0xpKAidixpL3+EfICmasBT4=
