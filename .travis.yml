language: node_js
node_js:
- '8'
os:
- linux
cache: npm
install:
- npm install
- npm install -g gulp
- npm run bootstrap-deps
- npm run build
jobs:
  include:
  - stage: release-alpha
    if: branch != master
    script: "./bin/release-patch.sh"
  - stage: release-patch
    if: branch = master
    script: "./bin/release.sh"
services:
- mongodb
env:
  global:
  - secure: FkMgtrgTxTDiNJeB5v/ucGXfMWNG+Mi8Xd2sYpxik2O/fwJAFox/9StkhKXRgF0uCRlxjMYxwBHd5NtVSxn8/J7ObsgU5TwDzkQ5bRseQCTNZ4XXtp8zg/6UDSqvb+E+W9SkAstOED+qT8qwobtECuRl82mz9sKjEdGajzY+ahx8u9IyuCwmj25MIJTPHhPWpbSqPjCZGrDiFAGrkrpnLp9MdBX1yxtEBM88bfGTPNnYDWJgFQtdtItSCKrL4f2rr950H6cj4kqXnGiaQln/xNPV5bubxwxcRDgfMXkbYIF/7iQlrrHpsJMzRYak36SYPiqeY+jyg0KgbR4TqJnSGxcHIYB1iNVWi/XqAmh9Y+ukbTcQqyNlOtaEqfRDZQRex/125fz45t9B0hlGebs+wFrCFbs2Q2hJe1KuTnWq67CvPV6slhTVgrTPkGfNSF532nUIDjXfyuoNZUN1XtkVQDmho+cvdnHVmi4yq5cd9Va7Z+y75PL+n4sVEcrIiqL4JO/g/IL8PvAwm6cs+iRr4kuLYG2DoOZ/AZkVmpipW5KJdxhhEtbKupwA0ee+OgJHFd44w0/7EypCi4UQu/lo8HbUtZ/eL0Su1EEvwZic3MhQSbK1BobgBBsXg4zi8NUMc/BSj2h+dN67quk5mFKqKlzpJjdFhWMwqu1m8rOercs=
  - secure: D6mglwzsv34WHcRvkXzf9ZAfEEqtM0SFJbGB7DotA5Z+b8pbYrllz+oRJ9e2AurcJvi/fAJWjm0SKnapjRC95ZdMtDRm/bK8kF6KbMjbpJzGOpFZLwP5ZH+dQ8jAJg4Dnct0YcRqiDT7Fe88XEbGLwtJILU+dYEbYYAQ1nMU9rgMNPmZZx+Pl9P7mbgvwndKubu2gnVpmH3L+ejV1Q+1fFZiVM+VBc2C4PdMUSGygp2S3ctNBeglXmzKKdFLOx86Uc3QQwqa9AOJ14v4XJFLh5CTGryzmGBDTYC9slaJ1zqZwWJU0wcZVEosoLNMlFLgWkOhVmRFI1uNc+2KHaEq/V2ikozSpPUZdTdrK8OPF/e4ML+s/FQoeBzof75EGt8k2xzgE5PwxCVzWoOvd2CbwyaU3W1Agom6XJ9lMQ3F6102HWYgG/5yiddH0u4GGpqiWQzF4viQ9pKX4cZVEGy6lFb0urM7Bmp2ZT3K31HUSoc3qG8YmeTve+qf2rKJDzQJBsTXkvfQbBe5S9Hb1jOpJH041DkiTai4ndnw6FuWKuyDJIZuXGxc1HQBU8B7m4G/Z+IOMwvze1zJFVcX217KVmU/xuIzdblpZ+SvGXsO8nmCxP/s3veOHsFXM+vvLlaxz2JBqGADnX7qTFMo6y5wBnY2mZW2knsi+6jOXSmbOpg=
  - secure: ZxHu6azouUufApCrx//MOENbLw1uLjseN7JLpJiJ2CVpW7AU8iHJL1FVTGxFcYHpk/XMtZ4yNmGH8JGE6z3ImDbYmaoKQ7SGH8t52txmnumiR+Xg68if92g9P3fufMQQ+GIrbDjhNJy6QIXKNy3EMMZOWw0Rjoyz9Iq+1gBoOwGSWACw4WZn9zDZFPXPcZyIWsbWbYKru4WFPnRB0hHdu25Lf0yIX9WLOx8fiGXVn20l5LU+UOMXV4vXyKjSgnXi5js8oC4aEEmoPBSwmtr14gKi2t6et572iuugp/88PUMXbTkH2HqstgzO2h6EcBRLuv6rwmzSFIJNaHZIH0BRimNpauiROGdejNEyNCP0h5VTzxXR5AAcJkyaX6n0uWfHafzynnfiOe4vrqxFMu8GpF6TxX7Ojld60rMuJB83hXqz2ju3DzUJkeMcbEs1Y2KpQ6zzd6kcYWDHr2y+Zt4ArPGKEwX+h0hRTnPUbWKufcwaLzJZSSAcYvZos9B2kdKRUJLuUaqoKJIpRu8dPOaTX2Cnd35HZ06Qsj63kDzXsXgR8qzq4I4Suf9UxDCqMF0LpXCakILLr2AmcWmgOfsaToVA4ihH4tVbQG82PPcehNfD+b6U1btdXVEG3eXagBSqauFwOoOSD9up1Mk4pNq/bwSDCLNYOkmJ9px9Y9aVamU=
  - secure: iaQJrgmyDoqV8WcL5kiEQ/8GcO6IYK+NKicdg0q1mnXeULRTvVMxkE6X9ZQpXJ/4mllB7EZP3zeS1WaTEZfmqprfnijvoKnYG+VIVrbUmuSrb/CSe1qr/iVTkhuh3JLASCPVVnsJkofxtwRjHnEWwV2cXmzIYVUSYM+fSmEa4Zpsu/adk4YNJn8kD3oRRPYo7qD+8d01Fo7hzMJ7tt8ikU4PcI4RMXZJTfKUK1I4GY560U1Xzepe/Naa0bdp3x1A2+FN9SJsTBf3BHuSxPUq9+woJ9WffCdx/GQ1StWRBsDoABM47v77tVLAppd5S4vWb9y9BMQuL49QUQSN4qY4Wa7Y8XJRK5FcVplop+JwlCk1kXNPCxYkHXwFq3vMkko/29O2Y1ed460uSN2kiDSdlni3mM4/zFfYQg4gT4gjcbcW5CNRr+nszeSCLlpvXQ3/sg3G2HyxRqr3N4FYtMZQDGk2/PMNxTwowG25s3MiI+IaACZdMYCdFCdl9eO8Xj/IaIzoYcPy0isdEAfCpdUPLc7D0PlFNU5bFVkpmsuweCbCBBZoDfcT0vsidOkBs2eYKBTR/bFBtq8IghLCTuXME5fho9jPg9XdbXI1WrBWfXGLqB5WgKHFaU8k84apa/JNHOhWe8yl9HdZLPeoJJc/VkFOchZsgR6sZRk38T0ZkEI=
