language: node_js
node_js:
- '8'
os:
- linux
cache: npm
install:
- npm install
- npm install -g gulp
- npm run bootstrap-deps
- npm run build
jobs:
  include:
  - stage: release-alpha
    if: branch != master
    script: "./bin/release-patch.sh"
  - stage: release-patch
    if: branch = master
    script: "./bin/release.sh"
services:
- mongodb
env:
  global:
    secure: gbV0eY2xbF+Hq5HF8FYFAwCLsPTXw4eI1MwX3ll/V36/sMQUzVh2XlZlePYyAkYl4Li7ZBFKZnYSRkePiuxTqA0vcMX6SOaAvuVm7GcslW+MTV2gUjTnzSIsa28mfGJa60HvrcXophKqMPAxqTBoj++f++r19EYAdXlcQCng4xuMnGJ3GiBIbiCL90CguYZTse95s7aZKc+fAGwdDTQbnSRWB1P6uliJET6gWr+6oLqzcFEO6GM8due5ELFvoN//W+y+29Q4S3CBDfDcLp4hmXYNEIP8wmX8UXkpXXCDJ5wCJmMKfYIqjZrQEDaBXIvHvuZUKBG0iqU4/57l5a3GIILftOXGYR8S6CXPX+WIGNHcPhU7ZmCwGP3FkJIMqi2neBqRe2HgHggiKOZ5a6XxHXFdBRcS3X9t/Du416/g3r6Gq1r4BgC9MJ4gg0x1PpQ3cxSHSVZVQCDeMojMvxeAoqD373HBzIrp2FgJzVFG8ErlDoqnwA9Q920zBSHN76UFkq8xX7zfY8tz70v/rwCQjsN9FmavTKQ48MDEpBIzJqjGsCY6XO8j5oCx6JxBah94UgQ1p75HHk37MiRd5sxCIL7w4l0HyX9T8yc2MJp6I/FF7moSPtd+LPSjXvRUAFVUPYcQYZRKBR8LbEi4lnqCs+bRVw3Ba7hG5cEwGG8wfyE=
